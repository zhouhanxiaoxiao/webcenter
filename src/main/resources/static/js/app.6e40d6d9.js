(function(e){function t(t){for(var r,o,n=t[0],l=t[1],c=t[2],d=0,g=[];d<n.length;d++)o=n[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&g.push(a[o][0]),a[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(g.length)g.shift()();return i.push.apply(i,c||[]),s()}function s(){for(var e,t=0;t<i.length;t++){for(var s=i[t],r=!0,n=1;n<s.length;n++){var l=s[n];0!==a[l]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=s[0]))}return e}var r={},a={app:0},i=[];function o(t){if(r[t])return r[t].exports;var s=r[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=r,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(s,r,function(t){return e[t]}.bind(null,r));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=t,n=n.slice();for(var c=0;c<n.length;c++)t(n[c]);var u=l;i.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"034f":function(e,t,s){"use strict";s("85ec")},"07a6":function(e,t,s){e.exports=s.p+"img/login.747ffcef.png"},"108a":function(e,t,s){"use strict";s("c31e")},"23ed":function(e,t,s){"use strict";s("4ce6")},"4ce6":function(e,t,s){},5433:function(e,t,s){"use strict";s("b332")},"56d7":function(e,t,s){"use strict";s.r(t);s("d3b7"),s("ac1f"),s("5319"),s("e260"),s("e6cf"),s("cca6"),s("a79d");var r=s("2b0e"),a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("transition",{attrs:{name:"fade"}},[s("router-view")],1)],1)},i=[],o=s("959a"),n=s.n(o),l={name:"App",components:{},beforeMount:function(){this.$("body").css("background","url(".concat(n.a,") center no-repeat")),this.$("body").css("background-size","cover"),this.$store.commit("saveUser",this.$cookies.get("user"))}},c=l,u=(s("034f"),s("2877")),d=Object(u["a"])(c,a,i,!1,null,null,null),g=d.exports,m=(s("ab8b"),s("3e48"),s("a925")),p={login:"登录",register:"注册",reset:"重置",exit:"退出",personal:"个人中心",adminPage:"管理中心",mainPageTtile:"网上办事大厅",commitSuccess:"提交成功！",hello:"你好",action:"操作",add:"新增",edit:"修改",delete:"删除",save:"保存",cancel:"取消",uploadSuccess:"上传成功！",placeWriteForm:"请填写表单信息！",notice:{emailNotice:"邮箱通知",webNotice:"网页通知",notAllFalse:"必须选择一个通知，以便于接收系统信息！"},setting:{personalInfo:"个人信息",messageSetting:"通知管理",forBack:"意见反馈",editPwd:"修改密码"},webSit:{groupManager:"部门管理",userManager:"用户管理",urlManager:"链接管理",name:"网站名称",englishName:"网站英文名称",url:"链接",desc:"简介",englishDesc:"英文简介",imgUrl:"网站图片",statu:"状态"},user:{email:"邮箱",password:"密码",noEmail:"请输入邮箱！",errEmail:"请输入cibr或nibs邮箱！",noPassword:"请输入密码！",lessLengthPwd:"密码至少为8位！",name:"真实姓名",englishName:"英文姓名",repeatPwd:"确认密码",validate:"验证码",getCode:"获取验证码",noName:"请填写真实姓名！",lessLengthName:"真实姓名长度不能小于2！",noEnglishName:"请填写英文名！",noValidate:"请填写验证码！",lessValidate:"验证码至少为6位数字",reloadCode:"秒后重新获取",forgetPwd:"忘记密码？",pwdLogin:"密码登录",group:"部门",noRepeatPwd:"请再次输入密码！",notSamePwd:"两次输入的密码不一致！",noGroup:"请选择部门！",placeWrite:"请填写完整个人信息！",sendCodeSuccess:"验证码已发送至您邮箱！",emailExist:"邮箱已注册，请更换邮箱！",create:"注册成功！",noUser:"用户不存在！",hasCountToLogin:"已有账号？去登录！",validateErr:"验证码必须为6位数字"},err:{imgTypeErr:"请选择正确的图片文件['jpg','jpeg','png']",systemErr:"系统异常！",codeErr:"验证码校验失败！",pwdNotMatch:"密码错误！",imageTooBig:"文件太大，请选择小于2M的文件。"}},h=p,f={},b=f;r["default"].use(m["a"]);var w=new m["a"]({locale:localStorage.getItem("local")||"zh",messages:{zh:h,en:b}}),v=w,$=s("bc3a"),y=s.n($),x=s("8c4f"),_=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{width:"100%",height:"100vh"}},[r("div",{staticClass:"login-container"},[r("img",{staticStyle:{width:"80%","margin-top":"10px"},attrs:{src:s("07a6")}}),r("Divider"),r("div",{staticClass:"login-title"}),r("Form",{ref:"userLogin",staticClass:"common-line",attrs:{model:e.user,rules:e.rules,"label-width":60,"label-position":"left"}},[r("FormItem",{staticStyle:{"margin-bottom":"10px"},attrs:{prop:"email"}},[r("label",{attrs:{slot:"label"},slot:"label"},[e._v(e._s(e.$t("user.email")))]),r("i-input",{attrs:{type:"text"},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1),e.user.isPwd?r("FormItem",{attrs:{prop:"password"}},[r("label",{attrs:{slot:"label"},slot:"label"},[e._v(e._s(e.$t("user.password")))]),r("i-input",{attrs:{type:"password"},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1):e._e(),e.user.isPwd?e._e():r("FormItem",{attrs:{prop:"password"}},[r("label",{attrs:{slot:"label"},slot:"label"},[e._v(e._s(e.$t("user.validate")))]),r("i-input",{staticStyle:{width:"55%"},attrs:{placeholder:"Enter confirmation code"},model:{value:e.user.code,callback:function(t){e.$set(e.user,"code",t)},expression:"user.code"}}),r("Tooltip",{staticStyle:{width:"45%"},attrs:{content:e.$t("user.getCode"),placement:"top"}},[r("Button",{staticStyle:{display:"inline-block","margin-left":"-20px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"},attrs:{disabled:e.codeDiabled},on:{click:e.getCode}},[e._v(" "+e._s(e.codeText)+" ")])],1)],1)],1),r("div",{staticStyle:{width:"90%","margin-left":"5%","margin-top":"3%","margin-bottom":"70px"}},[r("Button",{attrs:{type:"primary",size:"large",long:""},on:{click:e.handleLogin}},[e._v(e._s(e.$t("login")))])],1),r("div",{staticStyle:{width:"100%",height:"40px","line-height":"40px",position:"absolute",bottom:"0","font-size":"12px",color:"darkgray"}},[r("a",{on:{click:e.changeLoginMethod}},[e._v(e._s(e.user.isPwd?e.$t("user.forgetPwd"):e.$t("user.pwdLogin")))]),e._v(" | "),r("a",{ref:"javascript:;",on:{click:e.gotoRegisterPage}},[e._v("注册")])])],1),r("v-loading",{attrs:{show:e.loading}})],1)},S=[],k=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.isShow?s("div",{staticClass:"loading"},[s("div",{staticStyle:{display:"inline-block",width:"20%","margin-top":"20px"}},[s("Alert",[e._v("加载中....")])],1),s("svg",{staticClass:"svg-container"},[s("path",{attrs:{id:"pulsar",stroke:"rgba(0,155,155,1)",fill:"none","stroke-width":"3","stroke-linejoin":"round",d:"M0,90L250,90Q257,60 262,87T267,95 270,88 273,92t6,35 7,-60T290,127 297,107s2,-11 10,-10 1,1 8,-10T319,95c6,4 8,-6 10,-17s2,10 9,11h210"}})])]):e._e()},M=[],P={name:"v-loading",props:{show:Boolean},beforeMount:function(){this.isShow=this.show},data:function(){return{isShow:!1}},watch:{show:function(e){console.log(e),this.isShow=e}}},I=P,C=(s("108a"),Object(u["a"])(I,k,M,!1,null,"41f2f373",null)),E=C.exports,N={name:"login",components:{VLoading:E},beforeMount:function(){},data:function(){var e=this,t=function(t,s,r){var a=/^\w{3,}@cibr\.ac\.cn$/,i=/^\w{3,}@nibs\.ac\.cn$/;a.test(e.user.email)||i.test(e.user.email)?r():r(new Error(e.$t("user.errEmail")))};return{loading:!1,user:{email:"",password:"",code:"",isPwd:!0},codeText:this.$t("user.getCode"),codeDiabled:!1,rules:{email:[{required:!0,message:this.$t("user.noEmail"),trigger:"blur"},{validator:t,trigger:"blur"}],password:[{required:!0,message:this.$t("user.noPassword"),trigger:"blur"},{type:"string",min:8,message:this.$t("user.lessLengthPwd"),trigger:"blur"}]}}},methods:{handleLogin:function(){this.loading=!0;var e=this;this.user.password=this.$md5(this.user.password),this.$axios.post("/login/handleLogin",this.user).then((function(t){e.loading=!1,"success"!==t.data.code?e.$Message.error(e.$t(t.data.code)):(e.$store.commit("saveUser",t.data.retMap.user),e.$router.push("/"))})).catch((function(t){console.log(t),e.loading=!1,e.$Message.error(e.$t("err.systemErr"))}))},gotoRegisterPage:function(){this.$router.push("/register")},changeLoginMethod:function(){this.user.isPwd=!this.user.isPwd},getCode:function(){if(""!==this.user.email){var e=/^\w{3,}@cibr\.ac\.cn$/,t=/^\w{3,}@nibs\.ac\.cn$/;if(e.test(this.user.email)||t.test(this.user.email)){var s=60,r=this;this.loading=!0,this.codeDiabled=!0;var a=setInterval((function(){s--,r.codeText=s+r.$t("user.reloadCode"),s<=0&&(r.codeText=r.$t("user.getCode"),r.codeDiabled=!1,clearInterval(a))}),1e3);this.$axios.post("/register/getCode",{email:this.user.email}).then((function(e){r.loading=!1,"success"!==e.data.code?r.$Message.error(r.$t(e.data.code)):r.$Message.success(r.$t("user.sendCodeSuccess"))})).catch((function(e){console.log(e),r.loading=!1,r.$Message.error(r.$t("err.systemErr"))}))}else this.$Message.error(this.$t("user.errEmail"))}else this.$Message.error(this.$t("user.noEmail"))}}},L=N,W=(s("5433"),Object(u["a"])(L,_,S,!1,null,"11462d25",null)),F=W.exports,T=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{width:"100%",height:"100vh"}},[r("div",{staticClass:"login-container"},[r("img",{staticStyle:{width:"80%","margin-top":"10px"},attrs:{src:s("07a6")}}),r("Divider"),r("Form",{ref:"formValidate",staticStyle:{width:"90%","margin-left":"5%"},attrs:{model:e.user,rules:e.rules,"label-width":80},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSubmit("formValidate")}}},[r("FormItem",{staticStyle:{"margin-bottom":"5px"},attrs:{prop:"name"}},[r("label",{attrs:{slot:"label"},slot:"label"},[e._v(e._s(e.$t("user.name")))]),r("i-input",{attrs:{placeholder:"Enter your name"},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}})],1),r("FormItem",{staticStyle:{"margin-bottom":"5px"},attrs:{prop:"englishName"}},[r("label",{attrs:{slot:"label"},slot:"label"},[e._v(e._s(e.$t("user.englishName")))]),r("i-input",{attrs:{placeholder:"Enter your english name"},model:{value:e.user.englishName,callback:function(t){e.$set(e.user,"englishName",t)},expression:"user.englishName"}})],1),r("FormItem",{staticStyle:{"margin-bottom":"5px"},attrs:{prop:"email"}},[r("label",{attrs:{slot:"label"},slot:"label"},[e._v(e._s(e.$t("user.email")))]),r("i-input",{attrs:{placeholder:"Enter your CIBR or NIBS email"},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1),r("FormItem",{staticStyle:{"margin-bottom":"5px"},attrs:{prop:"password"}},[r("label",{attrs:{slot:"label"},slot:"label"},[e._v(e._s(e.$t("user.password")))]),r("i-input",{attrs:{type:"password",placeholder:"Enter your password"},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),r("FormItem",{staticStyle:{"margin-bottom":"5px"},attrs:{prop:"repeatPwd"}},[r("label",{attrs:{slot:"label"},slot:"label"},[e._v(e._s(e.$t("user.repeatPwd")))]),r("i-input",{attrs:{type:"password",placeholder:"Confirm your password"},model:{value:e.user.repeatPwd,callback:function(t){e.$set(e.user,"repeatPwd",t)},expression:"user.repeatPwd"}})],1),r("FormItem",{staticStyle:{"margin-bottom":"5px"},attrs:{prop:"groupid"}},[r("label",{attrs:{slot:"label"},slot:"label"},[e._v(e._s(e.$t("user.group")))]),r("i-select",{staticStyle:{"text-align":"left"},attrs:{placeholder:"select your department"},model:{value:e.user.groupid,callback:function(t){e.$set(e.user,"groupid",t)},expression:"user.groupid"}},e._l(e.groups,(function(t){return r("i-option",{key:t.id,attrs:{value:t.id}},[e._v(" "+e._s(t.groupname)+" ")])})),1)],1),r("FormItem",{staticStyle:{"margin-bottom":"5px"},attrs:{prop:"validate"}},[r("label",{attrs:{slot:"label"},slot:"label"},[e._v(e._s(e.$t("user.validate")))]),r("i-input",{staticStyle:{width:"50%"},attrs:{placeholder:"Enter confirmation code"},model:{value:e.user.validate,callback:function(t){e.$set(e.user,"validate",t)},expression:"user.validate"}}),r("Tooltip",{staticStyle:{width:"50%"},attrs:{content:e.$t("user.getCode"),placement:"top"}},[r("Button",{staticStyle:{display:"inline-block","margin-left":"-20px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"},attrs:{disabled:e.codeDiabled},on:{click:e.getCode}},[e._v(" "+e._s(e.codeText)+" ")])],1)],1),r("FormItem",[r("div",{staticStyle:{width:"100%","text-align":"left","margin-bottom":"50px"}},[r("i-button",{staticClass:"submitUser",attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("formValidate")}}},[e._v(e._s(e.$t("register"))+" ")]),r("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(t){return e.handleReset("formValidate")}}},[e._v(e._s(e.$t("reset"))+" ")])],1)])],1),r("div",{staticStyle:{width:"100%",height:"40px","line-height":"40px",position:"absolute",bottom:"0","font-size":"12px",color:"darkgray","text-align":"right"}},[r("a",{on:{click:e.gotoLogin}},[e._v(e._s(e.$t("user.hasCountToLogin")))])])],1),r("v-loading",{attrs:{show:e.loading}})],1)},O=[],U=(s("d81d"),{casLoginUrl:"http://cibr.server.com:8080/",casOutUrl:"http://cibr.server.com:8080/logout"}),j=U,z={name:"register",components:{VLoading:E},mounted:function(){this.initPage();var e=this;this.$(document).keyup((function(t){"13"==t.keyCode&&e.handleSubmit("formValidate")}))},data:function(){var e=this,t=function(t,s,r){s!==e.user.password?r(new Error(e.$t("user.notSamePwd"))):r()},s=function(t,s,r){var a=/^\w{3,}@cibr\.ac\.cn$/,i=/^\w{3,}@nibs\.ac\.cn$/;a.test(e.user.email)||i.test(e.user.email)?r():r(new Error(e.$t("user.errEmail")))};return{loading:!1,groups:new Array,user:{name:"",englishName:"",email:"",password:"",repeatPwd:"",validate:"",groupid:""},codeDiabled:!1,codeText:this.$t("user.getCode"),rules:{name:[{required:!0,message:this.$t("user.noName"),trigger:"blur"},{type:"string",min:2,message:this.$t("user.lessLengthName"),trigger:"blur"}],englishName:[{required:!0,message:this.$t("user.noEnglishName"),trigger:"blur"},{type:"string",pattern:/^[ a-zA-Z]+$/,message:this.$t("user.lessLengthName"),trigger:"blur"}],email:[{required:!0,message:this.$t("user.noEmail"),trigger:"blur"},{validator:s,trigger:"blur"}],password:[{required:!0,message:this.$t("user.noPassword"),trigger:"blur"},{type:"string",min:8,message:this.$t("user.lessLengthPwd"),trigger:"blur"}],repeatPwd:[{required:!0,message:this.$t("user.noRepeatPwd"),trigger:"blur"},{validator:t,trigger:"blur"}],groupid:[{required:!0,message:this.$t("user.noGroup"),trigger:"blur"}],validate:[{required:!0,message:this.$t("user.noValidate"),trigger:"blur"}]}}},methods:{initPage:function(){var e=this;console.log("init"),this.loading=!0,this.$axios.post("/register/initPage",{}).then((function(t){e.loading=!1,"success"!==t.data.code?e.$Message.error(e.$t(t.data.code)):(e.groups=new Array,void 0!=t.data.retMap.groups&&t.data.retMap.groups.map((function(t){t.key=t.id,e.groups.push(t)})))})).catch((function(t){console.log(t),e.loading=!1,e.$Message.error(e.$t("err.systemErr"))}))},getCode:function(){if(""!==this.user.email){var e=/^\w{3,}@cibr\.ac\.cn$/,t=/^\w{3,}@nibs\.ac\.cn$/;if(e.test(this.user.email)||t.test(this.user.email)){var s=60,r=this;this.loading=!0,this.codeDiabled=!0;var a=setInterval((function(){s--,r.codeText=s+r.$t("user.reloadCode"),s<=0&&(r.codeText=r.$t("user.getCode"),r.codeDiabled=!1,clearInterval(a))}),1e3);this.$axios.post("/register/getCode",{email:this.user.email}).then((function(e){r.loading=!1,"success"!==e.data.code?r.$Message.error(r.$t(e.data.code)):r.$Message.success(r.$t("user.sendCodeSuccess"))})).catch((function(e){console.log(e),r.loading=!1,r.$Message.error(r.$t("err.systemErr"))}))}else this.$Message.error(this.$t("user.errEmail"))}else this.$Message.error(this.$t("user.noEmail"))},gotoLogin:function(){window.location=j.casLoginUrl},handleReset:function(e){this.$refs[e].resetFields()},handleSubmit:function(e){var t=this;this.$refs[e].validate((function(e){e?(t.loading=!0,t.user.password=t.$md5(t.user.password),t.user.repeatPwd=t.$md5(t.user.repeatPwd),t.$axios.post("/register/createUser",{user:JSON.stringify(t.user)}).then((function(e){t.loading=!1,"success"!==e.data.code?t.$Message.error(t.$t(e.data.code)):(t.$Message.success(t.$t("user.create")),setTimeout((function(){t.$router.push("/login")}),1e3))})).catch((function(e){console.log(e),t.loading=!1,t.$Message.error(t.$t("err.systemErr"))}))):t.$Message.error(t.$t("user.placeWrite"))}))}}},A=z,V=Object(u["a"])(A,T,O,!1,null,"f708ced0",null),q=V.exports,B=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"home-all"},[s("v-cibrnav"),s("div",{staticClass:"home-container"},[s("div",{staticClass:"row"},e._l(e.webs,(function(e){return s("div",{key:e.id,staticClass:"col-xl-3 col-lg-3 col-md-6 col-sm-6"},[s("web-site-item",{attrs:{"web-item":e}})],1)})),0)]),s("v-loading",{attrs:{show:e.loading}})],1)},D=[],R=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Card",{staticClass:"web-item",nativeOn:{click:function(t){return e.gotoUrl(t)}}},[s("i-row",[s("i-col",{attrs:{span:"10"}},[s("div",{staticClass:"item-img",style:{background:"url("+e.backImg+") no-repeat"}})]),s("i-col",{attrs:{span:"13",offset:"1"}},[s("h6",[e._v(e._s(e.webName))]),s("div",{staticStyle:{width:"100%","font-size":"12px",color:"#e8eaec","margin-top":"10px",display:"-webkit-box",overflow:"hidden","text-overflow":"ellipsis","-webkit-line-clamp":"3","-webkit-box-orient":"vertical"}},[e._v(" "+e._s(e.webDesc)+" ")])])],1)],1)},J=[],G=(s("b0c0"),{name:"webSiteItem",props:{webItem:Object},beforeMount:function(){},methods:{gotoUrl:function(){window.open(this.webItem.url)}},computed:{webName:function(){return"en"===localStorage.getItem("local")?this.webItem.englishname:this.webItem.name},backImg:function(){return this.$axios.defaults.baseURL+"file/img/"+this.webItem.imgurl},webDesc:function(){return"en"===localStorage.getItem("local")?this.webItem.englishdesc:this.webItem.descriptions}}}),H=G,Z=(s("23ed"),Object(u["a"])(H,R,J,!1,null,"260bfae8",null)),Q=Z.exports,K=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("nav",{staticClass:"navbar",staticStyle:{height:"8vh","background-color":"cornflowerblue","min-height":"8vh","max-height":"80px"}},[r("a",{staticClass:"navbar-brand",staticStyle:{display:"inline-block",height:"100%",color:"white","font-size":"14px"},on:{click:e.gotoHome}},[r("img",{staticStyle:{height:"100%"},attrs:{src:s("07a6")}})]),r("div",{staticStyle:{color:"white",height:"6vh","line-height":"6vh","font-size":"14px"}},[e._v(" "+e._s(e.$t("mainPageTtile"))+" "),r("Icon",{attrs:{type:"md-desktop"}})],1),r("div",{staticClass:"form-inline my-2 my-lg-0",staticStyle:{"max-height":"6vh","line-height":"6vh"}},[r("language"),e.showLogin?r("Button",{staticStyle:{height:"100%"},attrs:{shape:"circle",icon:"ios-contact",size:"large"},on:{click:e.gotoLogin}},[e._v(e._s(e.$t("login"))+" ")]):r("div",{staticClass:"dropdown"},[r("button",{staticClass:"btn btn-outline-light dropdown-toggle",attrs:{type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[e._v(" "+e._s(e.$t("hello")+"，"+e.helloUser)+" ")]),r("div",{staticClass:"dropdown-menu dropdown-menu-right",staticStyle:{"font-size":"14px","line-height":"normal"}},[r("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:e.gotoPersonal}},[e._v(e._s(e.$t("personal")))]),e.isAdmin?r("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:e.gotoAdminPage}},[e._v(e._s(e.$t("adminPage")))]):e._e(),r("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:e.casOut}},[e._v(e._s(e.$t("exit")))])])])],1),r("v-loading",{attrs:{show:e.loading}})],1)},X=[],Y=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"language-select",staticStyle:{color:"white",display:"inline-block"}},[s("div",{staticClass:"btn-group btn-group-sm btn-group-toggle",attrs:{"data-toggle":"buttons"}},[s("label",{staticClass:"btn btn-link active",staticStyle:{color:"white"}},[s("input",{attrs:{type:"radio",name:"options",id:"option1",checked:""},on:{click:function(t){return e.changeLanguage("zh")}}}),e._v(" 中文 ")]),s("span",{staticStyle:{color:"white"}},[e._v("|")]),s("label",{staticClass:"btn btn-link",staticStyle:{color:"white"}},[s("input",{attrs:{type:"radio",name:"options",id:"option3"},on:{click:function(t){return e.changeLanguage("en")}}}),e._v(" English ")])])])},ee=[],te={name:"language",methods:{changeLanguage:function(e){localStorage.setItem("local",e),window.location.reload()}}},se=te,re=Object(u["a"])(se,Y,ee,!1,null,"557b6b59",null),ae=re.exports,ie={name:"v-cibrnav",components:{VLoading:E,Language:ae},data:function(){return{loading:!1}},beforeMount:function(){},methods:{gotoAdminPage:function(){this.$router.push("/manager")},gotoPersonal:function(){this.$router.push("/personal")},gotoHome:function(){this.$router.push("/home")},gotoLogin:function(){window.location=j.casLoginUrl},casOut:function(){this.loading=!0,window.open(j.casOutUrl),setTimeout((function(){window.location.reload()}),5e3)},exitSystem:function(){this.loading=!0;var e=this;this.$axios.post("/login/exit",{}).then((function(t){e.loading=!1,"success"!=t.data.code?e.$Message.error(e.$t(t.data.code)):(e.$cookies.remove("token"),e.$cookies.remove("user"),window.location.reload())})).catch((function(t){e.loading=!1,console.log(t),e.$Message.error(e.$t("err.systemErr"))}))}},computed:{showLogin:function(){return void 0==this.$store.getters.getUser},helloUser:function(){return this.$store.getters.getName},isAdmin:function(){return this.$store.getters.isAdmin}}},oe=ie,ne=Object(u["a"])(oe,K,X,!1,null,"451b2549",null),le=ne.exports,ce={name:"HomePage",components:{VCibrnav:le,VLoading:E,WebSiteItem:Q},data:function(){return{loading:!1,user:{},webs:[]}},beforeMount:function(){this.$(".item-img").css("background"),this.initPage()},methods:{initPage:function(){var e=this;this.$axios.post("/home/initPage",{}).then((function(t){"success"!=t.data.code?e.$Message.error(e.$t(t.data.code)):(e.user=t.data.retMap.user,e.$cookies.set("user",t.data.retMap.user),e.$store.commit("saveUser",t.data.retMap.user),e.webs=t.data.retMap.webs)})).catch((function(t){console.log(t),e.loading=!1,e.$Message.error(e.$t("err.systemErr"))}))},gotoAdminPage:function(){this.$router.push("/manager")},gotoLogin:function(){window.location=j.casLoginUrl},exitSystem:function(){this.loading=!0;var e=this;this.$axios.post("/login/exit",{}).then((function(t){e.loading=!1,"success"!=t.data.code?e.$Message.error(e.$t(t.data.code)):(e.$cookies.remove("token"),e.$cookies.remove("user"),window.location.reload())})).catch((function(t){e.loading=!1,console.log(t),e.$Message.error(e.$t("err.systemErr"))}))}},computed:{showLogin:function(){return void 0==this.$store.getters.getUser},helloUser:function(){return this.$store.getters.getName},isAdmin:function(){return this.$store.getters.isAdmin}}},ue=ce,de=(s("5da0"),Object(u["a"])(ue,B,D,!1,null,"07f0c1b6",null)),ge=de.exports,me=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"demo-split",staticStyle:{width:"100%",height:"100vh","background-color":"white",overflow:"hidden"}},[s("v-cibrnav"),s("Split",{attrs:{min:.15,max:.5},model:{value:e.leftSize,callback:function(t){e.leftSize=t},expression:"leftSize"}},[s("div",{staticClass:"demo-split-pane",staticStyle:{"text-align":"left"},attrs:{slot:"left"},slot:"left"},[s("div",{staticStyle:{height:"100vh",width:"100%",display:"inline-block",overflow:"auto"}},[s("Menu",{staticStyle:{width:"100%",height:"100%"},attrs:{theme:"dark","active-name":e.activityName},on:{"on-select":e.changeMenu}},[s("MenuGroup",{attrs:{title:"用户管理"}},[s("MenuItem",{attrs:{name:"1"}},[s("Icon",{attrs:{type:"md-document"}}),e._v(" "+e._s(e.$t("webSit.groupManager"))+" ")],1),s("MenuItem",{attrs:{name:"2"}},[s("Icon",{attrs:{type:"md-chatbubbles"}}),e._v(" "+e._s(e.$t("webSit.userManager"))+" ")],1)],1),s("MenuGroup",{attrs:{title:"内容管理"}},[s("MenuItem",{attrs:{name:"webSite"}},[s("Icon",{attrs:{type:"md-heart"}}),e._v(" "+e._s(e.$t("webSit.urlManager"))+" ")],1)],1)],1)],1)]),s("div",{staticClass:"demo-split-pane",attrs:{slot:"right"},slot:"right"},[s("div",{staticClass:"right-container"},["webSite"==e.activityName?s("web-sit-manage"):e._e()],1)])])],1)},pe=[],he=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticStyle:{width:"100%",height:"95vh"}},[s("Card",{staticStyle:{width:"100%"}},[s("div",{staticStyle:{"text-align":"left",width:"30%",display:"inline-block"}},[s("h3",[e._v(e._s(e.$t("webSit.urlManager")))])]),s("div",{staticStyle:{position:"absolute",right:"20px",display:"inline-block"}},[s("Button",{attrs:{icon:"md-add",type:"primary"},on:{click:e.addNewWebSit}},[e._v(e._s(e.$t("add")))])],1)]),s("i-table",{attrs:{border:"",stripe:"",columns:e.cols,data:e.webs},scopedSlots:e._u([{key:"name",fn:function(t){var r=t.row;return[s("strong",[e._v(e._s(r.name))])]}},{key:"url",fn:function(t){var r=t.row;return[s("Tag",{nativeOn:{click:function(t){return e.gotoUrl(r.url)}}},[e._v(e._s(r.url))])]}},{key:"imgUrl",fn:function(t){var r=t.row;return[s("div",{staticStyle:{width:"58px",height:"58px"}},[""!=r.imgurl?s("img",{staticStyle:{width:"100%"},attrs:{src:e.webImage(r.imgurl)}}):e._e()])]}},{key:"desc",fn:function(t){var r=t.row;return[s("strong",[e._v(e._s(r.descriptions))])]}},{key:"statu",fn:function(t){var r=t.row;return["00"==r.curstatu?s("Tag",{attrs:{color:"success"}},[e._v(e._s("运行中"))]):e._e(),"01"==r.curstatu?s("Tag",{attrs:{color:"warning"}},[e._v(e._s("停止运行"))]):e._e(),"09"==r.curstatu?s("Tag",{attrs:{color:"error"}},[e._v(e._s("废弃"))]):e._e()]}},{key:"action",fn:function(t){var r=t.row;return[s("i-button",{on:{click:function(t){return e.editWebsit(r)}}},[e._v(e._s(e.$t("edit")))]),e._v(" "),s("Poptip",{staticStyle:{"z-index":"99999"},attrs:{confirm:"",placement:"top-end",transfer:!0,title:"Are you sure you want to delete this item?"},on:{"on-ok":function(t){return e.deleteOk(r)}}},[s("i-button",{attrs:{type:"error"}},[e._v(e._s(e.$t("delete")))])],1)]}}])}),s("v-loading",{attrs:{show:e.loading}}),s("Modal",{attrs:{title:e.$t("add")},on:{"on-ok":e.ok,"on-cancel":e.cancel},model:{value:e.showAdd,callback:function(t){e.showAdd=t},expression:"showAdd"}},[s("i-form",{ref:"newWebsit",attrs:{model:e.newWebsit,rules:e.ruleWebsit,"label-width":100}},[s("FormItem",{attrs:{label:e.$t("webSit.name"),prop:"name"}},[s("Input",{attrs:{placeholder:"Enter websit name"},model:{value:e.newWebsit.name,callback:function(t){e.$set(e.newWebsit,"name",t)},expression:"newWebsit.name"}})],1),s("FormItem",{attrs:{label:e.$t("webSit.englishName"),prop:"englishname"}},[s("Input",{attrs:{placeholder:"Enter websit english name"},model:{value:e.newWebsit.englishname,callback:function(t){e.$set(e.newWebsit,"englishname",t)},expression:"newWebsit.englishname"}})],1),s("FormItem",{attrs:{label:e.$t("webSit.url"),prop:"url"}},[s("Input",{attrs:{placeholder:"Enter your name"},model:{value:e.newWebsit.url,callback:function(t){e.$set(e.newWebsit,"url",t)},expression:"newWebsit.url"}})],1),s("FormItem",{attrs:{label:e.$t("webSit.desc"),prop:"descriptions"}},[s("Input",{attrs:{placeholder:"Enter your name"},model:{value:e.newWebsit.descriptions,callback:function(t){e.$set(e.newWebsit,"descriptions",t)},expression:"newWebsit.descriptions"}})],1),s("FormItem",{attrs:{label:e.$t("webSit.englishDesc"),prop:"englishdesc"}},[s("Input",{attrs:{placeholder:"Enter your name"},model:{value:e.newWebsit.englishdesc,callback:function(t){e.$set(e.newWebsit,"englishdesc",t)},expression:"newWebsit.englishdesc"}})],1),s("FormItem",{attrs:{label:e.$t("webSit.imgUrl"),prop:"imgurl"}},[s("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"58px"},attrs:{name:"webImg","show-upload-list":!1,"default-file-list":e.defaultList,"on-success":e.handleSuccess,format:["jpg","jpeg","png"],"max-size":2048,"on-format-error":e.handleFormatError,"on-exceeded-size":e.handleMaxSize,type:"drag",action:e.$axios.defaults.baseURL+"file/upload"}},[s("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[""==e.newWebsit.imgurl?s("Icon",{attrs:{type:"ios-camera",size:"20"}}):e._e(),""!=e.newWebsit.imgurl?s("img",{staticStyle:{width:"100%"},attrs:{src:e.imgUrl}}):e._e()],1)])],1)],1)],1)],1)},fe=[],be={name:"WebSitManage",components:{VLoading:E},data:function(){return{cols:[],webs:[],loading:!1,showAdd:!1,actionFlag:"",actionTitle:"",defaultList:[],editId:"",tempWeb:{},newWebsit:{name:"",englishname:"",url:"",descriptions:"",englishdesc:"",imgurl:""},ruleWebsit:{name:[{required:!0,message:"The name cannot be empty",trigger:"blur"}],englishname:[{required:!0,message:"The english name cannot be empty",trigger:"blur"}],url:[{required:!0,message:"The url cannot be empty",trigger:"blur"},{type:"url",message:"Incorrect url format",trigger:"blur"}],descriptions:[{required:!0,message:"The description cannot be empty",trigger:"blur"}],englishdesc:[{required:!0,message:"The english description cannot be empty",trigger:"blur"}],imgurl:[{required:!0,message:"The image cannot be empty",trigger:"blur"}]}}},beforeMount:function(){this.initPage()},methods:{editWebsit:function(e){this.actionFlag="edit",this.actionTitle=this.$t("edit"),this.newWebsit=JSON.parse(JSON.stringify(e)),this.showAdd=!0},deleteOk:function(e){console.log(e)},editCancel:function(){},gotoUrl:function(e){window.open(e)},ok:function(){var e=this;"add"===this.actionFlag?this.$refs["newWebsit"].validate((function(t){if(t){e.loading=!0;var s={web:JSON.stringify(e.newWebsit)};e.$axios.post("/admin/submitNewWebsit",s).then((function(t){e.loading=!1,"success"!=t.data.code?e.$Message.error(e.$t(t.data.code)):e.initPage()})).catch((function(t){e.loading=!1,console.log(t),e.$Message.error(e.$t("err.systemErr"))}))}else e.showAdd=!0})):this.$refs["newWebsit"].validate((function(t){if(t){e.loading=!0;var s={web:JSON.stringify(e.newWebsit)};e.$axios.post("/admin/updateWebsit",s).then((function(t){e.loading=!1,"success"!=t.data.code?e.$Message.error(e.$t(t.data.code)):e.initPage()})).catch((function(t){e.loading=!1,console.log(t),e.$Message.error(e.$t("err.systemErr"))}))}else e.showAdd=!0}))},cancel:function(){},handleMaxSize:function(){this.$Message.error(this.$t("err.imageTooBig"))},handleFormatError:function(){this.$Message.error(this.$t("err.imgTypeErr"))},handleSuccess:function(e){this.$Message.success(this.$t("uploadSuccess")),console.log(e),this.newWebsit.imgurl=e.retMap.file.id},addNewWebSit:function(){this.actionFlag="add",this.actionTitle=this.$t("add"),this.newWebsit={name:"",englishname:"",url:"",descriptions:"",englishdesc:"",imgurl:""},this.showAdd=!0},webImage:function(e){return this.$axios.defaults.baseURL+"file/img/"+e},initPage:function(){this.initCols(),this.loading=!0;var e=this;this.$axios.get("/admin/webManagerInit").then((function(t){console.log(t),e.loading=!1,"success"!=t.data.code?e.$Message.error(e.$t(t.data.code)):e.webs=t.data.retMap.websits})).catch((function(t){e.loading=!1,console.log(t),e.$Message.error(e.$t("err.systemErr"))}))},initCols:function(){var e=new Array;e.push({title:this.$t("webSit.name"),slot:"name"}),e.push({title:this.$t("webSit.url"),slot:"url"}),e.push({title:this.$t("webSit.imgUrl"),slot:"imgUrl"}),e.push({title:this.$t("webSit.desc"),slot:"desc"}),e.push({title:this.$t("webSit.statu"),slot:"statu"}),e.push({title:this.$t("action"),slot:"action"}),this.cols=e}},computed:{imgUrl:function(){return this.$axios.defaults.baseURL+"file/img/"+this.newWebsit.imgurl}}},we=be,ve=Object(u["a"])(we,he,fe,!1,null,"6a081c99",null),$e=ve.exports,ye={name:"AdminPage",components:{VCibrnav:le,WebSitManage:$e},data:function(){return{leftSize:.2,activityName:"1"}},methods:{changeMenu:function(e){console.log(e),this.activityName=e}}},xe=ye,_e=(s("dc3d"),Object(u["a"])(xe,me,pe,!1,null,"82ed5fd2",null)),Se=_e.exports,ke=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("v-cibrnav"),s("div",{staticStyle:{width:"100%",height:"88vh"}},[s("div",{staticStyle:{background:"white",width:"60%","margin-left":"20%","text-align":"left","margin-top":"20px","min-height":"500px","border-radius":"10px",padding:"20px 10px"}},[s("h3",[e._v(e._s(e.$t("personal")))]),s("Divider"),s("Split",{staticStyle:{height:"100%"},model:{value:e.leftSize,callback:function(t){e.leftSize=t},expression:"leftSize"}},[s("div",{attrs:{slot:"trigger"},slot:"trigger"}),s("div",{attrs:{slot:"left"},slot:"left"},[s("Menu",{staticStyle:{height:"100%",width:"100%"},attrs:{"active-name":e.activeName},on:{"on-select":e.changeMenu}},[s("MenuItem",{attrs:{name:"personalInfo"}},[s("Icon",{attrs:{type:"ios-contact"}}),e._v(" "+e._s(e.$t("setting.personalInfo"))+" ")],1),s("MenuItem",{attrs:{name:"editPwd"}},[s("Icon",{attrs:{type:"md-eye"}}),e._v(" "+e._s(e.$t("setting.editPwd"))+" ")],1),s("MenuItem",{attrs:{name:"messageSetting"}},[s("Icon",{attrs:{type:"ios-chatboxes"}}),e._v(" "+e._s(e.$t("setting.messageSetting"))+" ")],1),s("MenuItem",{attrs:{name:"forBack"}},[s("Icon",{attrs:{type:"ios-clipboard"}}),e._v(" "+e._s(e.$t("setting.forBack"))+" ")],1)],1)],1),s("div",{staticClass:"demo-split-pane",attrs:{slot:"right"},slot:"right"},["personalInfo"===e.activeName?s("user-info"):e._e(),"editPwd"===e.activeName?s("edit-password"):e._e(),"messageSetting"===e.activeName?s("notice-manage"):e._e()],1)])],1)])],1)},Me=[],Pe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticStyle:{width:"60%",height:"100%"}},[s("Form",{ref:"formValidate",staticStyle:{width:"90%","margin-left":"5%"},attrs:{model:e.user,rules:e.rules,"label-width":80}},[s("FormItem",{staticStyle:{"margin-bottom":"5px"},attrs:{prop:"name"}},[s("label",{attrs:{slot:"label"},slot:"label"},[e._v(e._s(e.$t("user.name")))]),s("i-input",{attrs:{placeholder:"Enter your name"},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}})],1),s("FormItem",{staticStyle:{"margin-bottom":"5px"},attrs:{prop:"englishname"}},[s("label",{attrs:{slot:"label"},slot:"label"},[e._v(e._s(e.$t("user.englishName")))]),s("i-input",{attrs:{placeholder:"Enter your english name"},model:{value:e.user.englishname,callback:function(t){e.$set(e.user,"englishname",t)},expression:"user.englishname"}})],1),s("FormItem",{staticStyle:{"margin-bottom":"5px"},attrs:{prop:"email"}},[s("label",{attrs:{slot:"label"},slot:"label"},[e._v(e._s(e.$t("user.email")))]),s("i-input",{attrs:{disabled:"",placeholder:"Enter your CIBR or NIBS email"},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1),s("FormItem",{staticStyle:{"margin-bottom":"5px"},attrs:{prop:"password"}},[s("label",{attrs:{slot:"label"},slot:"label"},[e._v(e._s(e.$t("user.password")))]),s("i-input",{attrs:{type:"password",disabled:"",placeholder:"Enter your password"},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),s("FormItem",{staticStyle:{"margin-bottom":"5px"},attrs:{prop:"groupid"}},[s("label",{attrs:{slot:"label"},slot:"label"},[e._v(e._s(e.$t("user.group")))]),s("i-select",{staticStyle:{"text-align":"left"},attrs:{disabled:"",placeholder:"select your department"},model:{value:e.user.groupid,callback:function(t){e.$set(e.user,"groupid",t)},expression:"user.groupid"}},e._l(e.groups,(function(t){return s("i-option",{key:t.id,attrs:{value:t.id}},[e._v(" "+e._s(t.groupname)+" ")])})),1)],1),s("FormItem",[s("div",{staticStyle:{width:"100%","text-align":"left","margin-bottom":"50px"}},[s("i-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateUser()}}},[e._v(e._s(e.$t("save"))+" ")])],1)])],1),s("v-loading",{ref:"loading",attrs:{show:e.loading}})],1)},Ie=[],Ce={name:"userInfo",components:{VLoading:E},data:function(){return{loading:!1,user:{},rules:{name:[{required:!0,message:this.$t("user.noName"),trigger:"blur"},{type:"string",min:2,message:this.$t("user.lessLengthName"),trigger:"blur"}],englishname:[{required:!0,message:this.$t("user.noEnglishName"),trigger:"blur"},{type:"string",pattern:/^[ a-zA-Z]+$/,message:this.$t("user.lessLengthName"),trigger:"blur"}]},groups:[]}},beforeMount:function(){this.initPage()},methods:{initPage:function(){var e=this;this.$axios.get("/personal/getUserInfo").then((function(t){"success"!=t.data.code?e.$Message.error(e.$t(t.data.code)):(e.user=t.data.retMap.user,e.groups=t.data.retMap.groups)})).catch((function(t){console.log(t),e.$Message.error(e.$t("err.systemErr"))}))},updateUser:function(){var e=this;this.$refs["formValidate"].validate((function(t){if(t){e.loading=!0;var s={user:JSON.stringify(e.user)};e.$axios.post("/personal/updateUser",s).then((function(t){e.loading=!1,"success"!=t.data.code?e.$Message.error(e.$t(t.data.code)):(e.$Message.success(e.$t("commitSuccess")),e.initPage())})).catch((function(t){e.loading=!1,console.log(t),e.$Message.error(e.$t("err.systemErr"))}))}else e.$Message.error(e.$t("user.placeWrite"))}))}}},Ee=Ce,Ne=Object(u["a"])(Ee,Pe,Ie,!1,null,"e8eed0fc",null),Le=Ne.exports,We=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticStyle:{width:"60%"}},[s("Form",{ref:"formValidate",attrs:{model:e.newPassword,rules:e.rules,"label-width":120}},[s("FormItem",{staticStyle:{"margin-bottom":"5px"},attrs:{prop:"validCode"}},[s("label",{attrs:{slot:"label"},slot:"label"},[e._v(e._s(e.$t("user.validate")))]),s("i-input",{staticStyle:{width:"50%"},attrs:{placeholder:"Enter confirmation code"},model:{value:e.newPassword.validCode,callback:function(t){e.$set(e.newPassword,"validCode",t)},expression:"newPassword.validCode"}}),s("Tooltip",{staticStyle:{width:"50%","text-align":"center"},attrs:{content:e.$t("user.getCode"),placement:"top"}},[s("Button",{staticStyle:{display:"inline-block",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"},attrs:{long:"",disabled:e.codeDiabled},on:{click:e.getCode}},[e._v(" "+e._s(e.codeText)+" ")])],1)],1),s("FormItem",{staticStyle:{"margin-bottom":"5px"},attrs:{prop:"newPwd"}},[s("label",{attrs:{slot:"label"},slot:"label"},[e._v(e._s(e.$t("user.password")))]),s("i-input",{attrs:{type:"password",placeholder:"Enter your password"},model:{value:e.newPassword.newPwd,callback:function(t){e.$set(e.newPassword,"newPwd",t)},expression:"newPassword.newPwd"}})],1),s("FormItem",{staticStyle:{"margin-bottom":"5px"},attrs:{prop:"repeatPwd"}},[s("label",{attrs:{slot:"label"},slot:"label"},[e._v(e._s(e.$t("user.repeatPwd")))]),s("i-input",{attrs:{type:"password",placeholder:"Confirm your password"},model:{value:e.newPassword.repeatPwd,callback:function(t){e.$set(e.newPassword,"repeatPwd",t)},expression:"newPassword.repeatPwd"}})],1),s("FormItem",[s("div",{staticStyle:{width:"100%","text-align":"left","margin-bottom":"50px"}},[s("i-button",{attrs:{type:"primary"},on:{click:function(t){return e.changePwd()}}},[e._v(e._s(e.$t("save"))+" ")])],1)])],1),s("v-loading",{attrs:{show:e.loading}})],1)},Fe=[],Te={name:"editPassword",components:{VLoading:E},data:function(){var e=this,t=function(t,s,r){s!==e.newPassword.newPwd?r(new Error(e.$t("user.notSamePwd"))):r()};return{loading:!1,codeText:this.$t("user.getCode"),codeDiabled:!1,newPassword:{validCode:"",newPwd:"",repeatPwd:""},rules:{newPwd:[{required:!0,message:this.$t("user.noPassword"),trigger:"blur"},{type:"string",min:8,message:this.$t("user.lessLengthPwd"),trigger:"blur"}],repeatPwd:[{required:!0,message:this.$t("user.noRepeatPwd"),trigger:"blur"},{validator:t,trigger:"blur"}],validCode:[{required:!0,message:this.$t("user.noValidate"),trigger:"blur"}]}}},methods:{getCode:function(){var e=60,t=this;this.loading=!0,this.codeDiabled=!0;var s=setInterval((function(){e--,t.codeText=e+t.$t("user.reloadCode"),e<=0&&(t.codeText=t.$t("user.getCode"),t.codeDiabled=!1,clearInterval(s))}),1e3);this.$axios.get("/personal/getCode").then((function(e){t.loading=!1,"success"!==e.data.code?t.$Message.error(t.$t(e.data.code)):t.$Message.success(t.$t("user.sendCodeSuccess"))})).catch((function(e){console.log(e),t.loading=!1,t.$Message.error(t.$t("err.systemErr"))}))},changePwd:function(){var e=this;this.$refs["formValidate"].validate((function(t){if(t){e.loading=!0;var s={pwd:e.$md5(e.newPassword.newPwd),validCode:e.newPassword.validCode};e.$axios.post("/personal/updatePwd",s).then((function(t){e.loading=!1,"success"!==t.data.code?e.$Message.error(e.$t(t.data.code)):e.$Message.success(e.$t("commitSuccess"))})).catch((function(t){console.log(t),e.loading=!1,e.$Message.error(e.$t("err.systemErr"))}))}else e.$Message.error(e.$t("placeWriteForm"))}))}}},Oe=Te,Ue=Object(u["a"])(Oe,We,Fe,!1,null,"1ea29ac9",null),je=Ue.exports,ze=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticStyle:{"margin-top":"50px","margin-left":"50px"}},[s("i-form",{attrs:{model:e.notice,"label-width":80}},[s("FormItem",{attrs:{label:e.$t("notice.emailNotice")}},[s("i-switch",{attrs:{size:"large",beforeChange:e.changeStatu},on:{"on-change":e.submitStatu},model:{value:e.notice.email,callback:function(t){e.$set(e.notice,"email",t)},expression:"notice.email"}})],1),s("FormItem",{attrs:{label:e.$t("notice.webNotice")}},[s("i-switch",{attrs:{size:"large",beforeChange:e.changeStatu},on:{"on-change":e.submitStatu},model:{value:e.notice.web,callback:function(t){e.$set(e.notice,"web",t)},expression:"notice.web"}})],1)],1),s("v-loading",{attrs:{show:e.loading}})],1)},Ae=[],Ve={name:"noticeManage",components:{VLoading:E},data:function(){return{loading:!1,notice:{email:!1,web:!1}}},beforeMount:function(){this.initPage()},methods:{initPage:function(){var e=this;this.$axios.get("/personal/initNotice").then((function(t){"success"!==t.data.code?e.$Message.error(e.$t(t.data.code)):(e.notice.web=t.data.retMap.notice.web,e.notice.email=t.data.retMap.notice.email)})).catch((function(t){console.log(t),e.$Message.error(e.$t("err.systemErr"))}))},changeStatu:function(){var e=this;return new Promise((function(t,s){e.$Modal.confirm({title:"切换确认",content:"请确保有一项通知方式可以联系到您！",onOk:function(){t()},onCancel:function(){s()}})}))},submitStatu:function(){var e=this;this.$axios.post("/personal/noticeUpdate",this.notice).then((function(t){e.loading=!1,"success"!==t.data.code?e.$Message.error(e.$t(t.data.code)):e.$Message.success(e.$t("commitSuccess"))})).catch((function(t){console.log(t),e.loading=!1,e.$Message.error(e.$t("err.systemErr"))}))}}},qe=Ve,Be=Object(u["a"])(qe,ze,Ae,!1,null,"66ce370d",null),De=Be.exports,Re={name:"PersonalInfo",components:{NoticeManage:De,EditPassword:je,UserInfo:Le,VCibrnav:le},data:function(){return{leftSize:.2,activeName:"personalInfo"}},methods:{changeMenu:function(e){console.log(e),this.activeName=e}}},Je=Re,Ge=(s("920a"),Object(u["a"])(Je,ke,Me,!1,null,"7c1e8112",null)),He=Ge.exports;r["default"].use(x["a"]);var Ze=[{path:"",redirect:"/home"},{path:"/",redirect:"/home"},{path:"/home",component:ge,meta:{index:0}},{path:"/personal",component:He,meta:{index:4}},{path:"/login",component:F,meta:{index:1}},{path:"/register",component:q,meta:{index:2}},{path:"/manager",component:Se,meta:{index:3}}],Qe=new x["a"]({routes:Ze}),Ke=Qe,Xe=s("1157"),Ye=s.n(Xe),et=s("e069"),tt=s.n(et),st=(s("dcad"),s("2b27")),rt=s.n(st),at=s("8237"),it=s.n(at),ot=s("2f62");r["default"].use(ot["a"]);var nt=new ot["a"].Store({state:{user:{}},mutations:{saveUser:function(e,t){e.user=t}},getters:{getUser:function(e){return e.user},getName:function(e){return"zh"!=localStorage.getItem("local")?e.user.englishname:e.user.name},isResearcher:function(e){for(var t=0;t<e.user.roles.length;t++){var s=e.user.roles[t];if("999999"==s.roletype||"01"==s.roletype)return!0}return!1},isFeeder:function(e){for(var t=0;t<e.user.roles.length;t++){var s=e.user.roles[t];if("999999"==s.roletype||"02"==s.roletype)return!0}return!1},isReviewer:function(e){for(var t=0;t<e.user.roles.length;t++){var s=e.user.roles[t];if("999999"==s.roletype||"40"==s.roletype)return!0}return!1},isAdmin:function(e){for(var t=0;t<e.user.roles.length;t++){var s=e.user.roles[t];if("999999"==s.roletype)return!0}return!1},isBioAna:function(e){for(var t=0;t<e.user.roles.length;t++){var s=e.user.roles[t];if("999999"==s.roletype||"34"==s.roletype)return!0}return!1},isGroupAdmin:function(e){if(e.user.group.groupadmin==e.user.id)return!0},isOther:function(e){for(var t=0;t<e.user.roles.length;t++){var s=e.user.roles[t];if("999999"==s.roletype||"09"==s.roletype)return!0}return!1},isCurrentUser:function(e){return function(t){if(e.user.id==t)return!0;for(var s=0;s<e.user.roles.length;s++){var r=e.user.roles[s];if("999999"==r.roletype)return!0}return!1}},isCurrentUserByName:function(e){return function(t){if(e.user.name==t)return!0;for(var s=0;s<e.user.roles.length;s++){var r=e.user.roles[s];if("999999"==r.roletype)return!0}return!1}}}});r["default"].use(tt.a),r["default"].config.productionTip=!1,r["default"].prototype.$axios=y.a,r["default"].prototype.$=Ye.a,r["default"].prototype.$cookies=rt.a,r["default"].prototype.$md5=it.a,y.a.defaults.withCredentials=!0,y.a.interceptors.request.use((function(e){var t=rt.a.get("token");return t&&(e.headers["token"]=t),e}),(function(e){return console.log(e),Promise.reject(e)})),y.a.interceptors.response.use((function(e){return e}),(function(e){if(console.log(e),e.response)switch(e.response.status){case 403:return rt.a.remove("token"),Ke.replace({path:"/login",query:{redirect:Ke.currentRoute.fullPath}}),r["default"].$Message.error(v.t("logintimeover")),Promise.reject("转到登录啦！");case 401:window.location.reload();break;default:break}Ke.replace({path:"/error",query:{redirect:Ke.currentRoute.fullPath}})})),new r["default"]({i18n:v,store:nt,router:Ke,render:function(e){return e(g)}}).$mount("#app")},"5da0":function(e,t,s){"use strict";s("a620")},6277:function(e,t,s){},"85ec":function(e,t,s){},"874d":function(e,t,s){},"920a":function(e,t,s){"use strict";s("6277")},"959a":function(e,t,s){e.exports=s.p+"img/light.bd559801.jpg"},a620:function(e,t,s){},b332:function(e,t,s){},c31e:function(e,t,s){},dc3d:function(e,t,s){"use strict";s("874d")}});
//# sourceMappingURL=app.6e40d6d9.js.map